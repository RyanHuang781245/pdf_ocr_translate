<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OCR Overlay Studio - Editor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}" />
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js" referrerpolicy="no-referrer"></script> -->
     <script src="/static/pdfjs/pdf.min.js" referrerpolicy="no-referrer"></script>
  </head>
  <body class="editor" data-job-id="{{ job_id }}">
    <header class="topbar">
      <div>
        <p class="eyebrow">Editing job</p>
        <h1>文件翻譯系統</h1>
        <p id="status" class="hint"></p>
      </div>
      <div class="topbar-actions">
        <a class="ghost" href="{{ url_for('index') }}">首頁</a>
        <a id="editedPdfLink" class="ghost" href="#" target="_blank" rel="noopener" style="display:none">開啟已編輯 PDF</a>
        <a class="ghost" href="{{ debug_pdf_url }}" target="_blank" rel="noopener">開啟除錯 PDF</a>
        <button id="batchTranslateBtn" class="ghost">Batch 翻譯</button>
        <button id="batchRestoreBtn" class="ghost">回復翻譯結果</button>
        <button id="saveBtn" class="primary">保存編輯</button>
        <button id="downloadBtn" class="ghost">下載已編輯 PDF</button>
      </div>
    </header>
    <main class="workspace">
      <aside class="panel">
        <section>
          <h2>頁面</h2>
          <div class="input-row">
            <button id="prevPage" class="ghost" type="button">上一頁</button>
            <select id="pageSelect"></select>
            <button id="nextPage" class="ghost" type="button">下一頁</button>
          </div>
          <label>
            <span>縮放 (%)</span>
            <div class="input-row">
              <input id="zoomRange" type="range" min="50" max="200" value="50" />
              <input id="zoomNumber" type="number" min="50" max="200" value="50" />
            </div>
          </label>
        </section>
        <section>
          <h2>編輯工具</h2>
          <label>
            <span>文字大小</span>
            <div class="input-row">
              <input id="fontSize" type="range" min="8" max="72" value="16" />
              <input id="fontSizeNumber" type="number" min="8" max="72" value="16" />
            </div>
          </label>
          <label>
            <span>文字顏色</span>
            <input id="fontColor" type="color" value="#1c3c5a" />
          </label>
          <div class="button-row">
            <button id="addBox" class="ghost">加入文字框</button>
          </div>
          <div class="button-row">
            <button id="copyBox" class="ghost">複製文字框</button>
          </div>
          <div class="button-row">
            <button id="deleteBox" class="danger">刪除文字框</button>
          </div>
        </section>
        <section>
          <h2>使用說明</h2>
          <p class="hint">
            拖曳方框即可移動它<br />
            點擊方格內部即可編輯文字。<br />
            使用 Delete 刪除方框
          </p>
        </section>
      </aside>
      <section class="canvas">
        <div class="viewer">
          <aside class="thumbs">
            <div class="thumbs-header">Pages</div>
            <div id="thumbs" class="thumbs-list"></div>
          </aside>
          <div class="page-view">
            <div id="pageView" class="page-view-inner"></div>
          </div>
        </div>
      </section>
    </main>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
